{% extends 'base.html' %}

{% block content %}
<div class="form_container">
	<div class="form_box sobrante">
		<h2>Registro</h2>
		
		{% if messages %}
		<div id="messages">
			{% for message in messages %}
			<div class="message {{ message.tags }}">{{ message }}</div>
			{% endfor %}
		</div>
		<br><br>
		{% endif %}
		
		<form method="post">
			{% csrf_token %}
			
			<label for="{{ form.username.id_for_label }}"><strong>Nombre de usuario:</strong></label>
			{{ form.username }}
			{% if form.username.errors %}
			<div class="error">
				{{ form.username.errors }}
			</div>
			{% endif %}
			<br><br>
			
			<label for="{{ form.email.id_for_label }}">Correo electrónico:</label>
			{{ form.email }}
			{% if form.email.errors %}
			<div class="error">
				{{ form.email.errors }}
			</div>
			{% endif %}
			<br><br>
			
			<div class="form-group">
				<label for="{{ form.user_type.id_for_label }}"><strong>Tipo de usuario:</strong></label>
				{{ form.user_type }}
				{% if form.user_type.errors %}
				<div class="error">
					{{ form.user_type.errors }}
				</div>
				{% endif %}
			</div>
			
			<label for="{{ form.password1.id_for_label }}">Contraseña:</label>
			{{ form.password1 }}
			{% if form.password1.errors %}
			<div class="error">
				{{ form.password1.errors }}
			</div>
			{% endif %}
			<br><br>
			
			<label for="{{ form.password2.id_for_label }}">Confirmación de contraseña:</label>
			{{ form.password2 }}
			{% if form.password2.errors %}
			<div class="error">
				{{ form.password2.errors }}
			</div>
			{% endif %}
			<br><br>
			
			<div>
				<input type="checkbox" id="acepta_terminos" name="acepta_terminos">
				<label for="acepta_terminos">
					Acepto los <a href="#" id="showTerms">términos y condiciones</a>
				</label>
			</div>
			
			<div id="popupTerms" class="popup-overlay">
				<div class="popup-box">
					<h2>Términos y Condiciones</h2>
					<p>
						Aquí puedes agregar los términos y condiciones de tu sitio.
						El usuario debe leer y aceptar estos términos para continuar.
					</p>
					<button id="closePopupTerms" class="btn_submit">Cerrar</button>
				</div>
			</div>
			
			<br>
			<button type="submit" class="btn_submit">Registrarse</button>
		</form>
		<br><br>
		<p>¿Ya tienes cuenta? <a href="{% url 'login' %}" class="btn_link gradiente_peque">Iniciar sesión</a></p>
	</div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        {% if registration_success %}
        setTimeout(function () {
            window.location.href = "{% url 'login' %}";
        }, 2500);
        {% endif %}

        document.getElementById('showTerms').addEventListener('click', function(event) {
            event.preventDefault();  // Evitar comportamiento predeterminado del enlace
            document.getElementById('popupTerms').classList.add('active');
        });

        document.getElementById('closePopupTerms').addEventListener('click', function() {
            document.getElementById('popupTerms').classList.remove('active');
        });
    });
</script>
{% endblock %}
